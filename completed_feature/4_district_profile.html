<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Height and Weight Measurement Efficiency for Block-wise Data</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <style>
            html, body {
                height: 100%;
                margin: 0;
            }

    table { 
		width: 90%; 
		border-collapse: collapse; 
	}
	/* Zebra striping */
	/* tr:nth-of-type(odd) { 
		background: #eee; 
	} */
    /* table { width: 50%; border: 1px solid gray; border-collapse: collapse; }
td { border: 1px solid gray; padding: 4px; }
tr.hidden { display: none; } */

	th { 
		background: skyblue; 
        font-size: 15px;
		/* color: black;  */
		font-weight: bold; 
		cursor: s-resize;
		background-repeat: no-repeat;
        background-position: 3% center;
        
	}
	td, th { 
		padding: 6px; 
		border: 1px solid #ccc; 
		text-align: left; 
	}
    /* tr.hidden{display: none;}
  th.alt { background-color: #ddd;} */
  th:nth-child(odd) {
  background-color: #f2f2f2;
}
    
  

            div h5{

                margin-top: 60;
            }
        </style>
    
    </head>
    <body>
     
            <!-- <div class="row h-70 justify-content-center">
                <div class="col">
                    <div class="test">
                  
                      <select id = "monthdropdown">
                        <option value="aug">November</option>
                        <option value="sep">December</option>
                        <option value="oct">January</option>
                      </select>
                    </div>
                      <div class="row h-10 justify-content-center">
                        <svg width="1000" height="50"></svg>
                    </div>
                        <div >
                        <h3 style="text-align: center; font-style: italic; font-weight: bold;">Outcome Indicators</h3>
                    </div>
                   
                    <div id="table" class="row h-75 bg-light justify-content-center">
                        
                    </div>

                    <div >
                        <h3 style="text-align: center; font-style: italic; font-weight: bold;">Performance Indicators</h3>
                    </div>

                    <div id="table1" class="row h-75 bg-light justify-content-center">
                        
                    </div>
                </div>
            </div>
          -->
           
          <div class="row text-center" style="height: 100px;">
            <div class="col-12 bg-info h-75 w-1000" >
              <!-- select month -->
              <div class="dropdown" style="float: left; margin:20px">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Select Month
                </button>
                <div class="dropdown-menu month" aria-labelledby="dropdownMenuButton">
                  <a class="dropdown-item" href="#">November</a>
                  <a class="dropdown-item" href="#">December</a>
                  <a class="dropdown-item" href="#">January</a>
                </div>
              </div>
              
              <button type="button" class="btn btn-info" style="float: left; margin:20px" onclick="location.href=`{% url 'feat3'%}`">Back</button>
              <button type="button" class="btn btn-info" style="float: left; margin:20px" onclick="location.href=`{% url 'feat5'%}`">Next</button>
          
              <div class='heading text-light mt-2'>District Profile</div>
              
            </div>
          
            <div>
              <h3 style="margin-left: 1000px; font-style: italic; font-weight: bold;">Outcome Indicators</h3>
            </div>
            <div style="color:black;" id="table" class="row h-55 w-90 ">               
          </div>
          
          <div >
              <h3 style="margin-left:600px; margin-top: 90px; font-style: italic; font-weight: bold;">Performance Indicators</h3>

          </div>
          
          <div style="color:black" id="table1" class="row h-15 w-60 bg-skyblue justify-content-right  ">
              
          </div>
          </div>      
            
    </body> 


        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.15.0/d3.min.js"></script>

        <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>

    <script>
        const render = data =>{

      
       }
       const monthwise = (data) => {
        // console.log(data)
           
           data.forEach(d => {
               //d.district_n = d.district_n;
                d.svrly_wstd = +d.svrly_wstd;
                d.nb_lbw = +d.nb_lbw;
                d.wstd_chld = +d.wstd_chld;
                d.stntd_chld = +d.stntd_chld;
                d.uw_chld = +d.uw_chld;
                d.stunting_percent = +d.stunting_percent;
                d.wasting_percent = +d.wasting_percent;
                d.underweight_percent = +d.underweight_percent;
                d.low_birth_weight_percent = +d.low_birth_weight_percent;
                d.prnt_intd_cf_6to24mnth_child = +d.prnt_intd_cf_6to24mnth_child;
                d.prnt_chld_bf_at_birth = +d.prnt_chld_bf_at_birth;
                d.prnt_chld_excly_bf = +d.prnt_chld_excly_bf;
                d.prnt_chld_rcvg_cf_wid_adq_dt_dvsty = +d.prnt_chld_rcvg_cf_wid_adq_dt_dvsty;
                d.prnt_chld_cf_wid_adq_dt_qnty = +d.prnt_chld_cf_wid_adq_dt_qnty;
                d.per_no_chld_cf_wid_appr_hndwhg_bfr_fdg = +d.per_no_chld_cf_wid_appr_hndwhg_bfr_fdg;
                d.prnt_intd_6to8mnth_cf_child = +d.prnt_intd_6to8mnth_cf_child;
                d.prnt_child_1yr_immnztn = +d.prnt_child_1yr_immnztn;
                d.prnt_anwmic_wmn = +d.prnt_anwmic_wmn;
                d.prnt_wmn_etg_xtr_ml_drng_prgncy = +d.prnt_wmn_etg_xtr_ml_drng_prgncy;
                d.prnt_wmn_rstg_drg_prgncy = +d.prnt_wmn_rstg_drg_prgncy;
                d.prnt_4_anc_vst_dlvry = +d.prnt_4_anc_vst_dlvry;
                d.prnt_trmstr_3wmn_cnsld_imdtbf = +d.prnt_trmstr_3wmn_cnsld_imdtbf;
                d.prnt_intd_cf_6to24mnth_child = +d.prnt_intd_cf_6to24mnth_child;
           });
            console.log(data);
            var aproperty = [];
            var sproperty = [];
            var oproperty = [];
            data.forEach(d=>{
                var temp = {}
                //temp['district_n'] = d.district_n;
                temp['svrly_wstd'] = d.svrly_wstd;
                temp['nb_lbw'] = d.nb_lbw;
                temp['wstd_chld'] = d.wstd_chld;
                temp['stntd_chld'] = d.stntd_chld;
                temp['uw_chld'] = d.uw_chld;
                temp['stunting_percent'] = d.stunting_percent;
                temp['wasting_percent'] = d.wasting_percent;
                temp['underweight_percent'] = d.underweight_percent;
                temp['low_birth_weight_percent'] = d.low_birth_weight_percent;
                temp['prnt_intd_cf_6to24mnth_child']= d.prnt_intd_cf_6to24mnth_child;
                temp['prnt_chld_bf_at_birth']= d.prnt_chld_bf_at_birth;
                temp['prnt_chld_excly_bf'] =d.prnt_chld_excly_bf;
                temp['prnt_chld_rcvg_cf_wid_adq_dt_dvsty'] = d.prnt_chld_rcvg_cf_wid_adq_dt_dvsty;
                temp['prnt_chld_cf_wid_adq_dt_qnty']=d.prnt_chld_cf_wid_adq_dt_qnty;
                temp['per_no_chld_cf_wid_appr_hndwhg_bfr_fdg']=d.per_no_chld_cf_wid_appr_hndwhg_bfr_fdg;
                temp['prnt_intd_6to8mnth_cf_child']=d.prnt_intd_6to8mnth_cf_child;
                temp['prnt_child_1yr_immnztn']=d.prnt_child_1yr_immnztn;
                temp['prnt_anwmic_wmn']=d.prnt_anwmic_wmn;
                temp['prnt_wmn_etg_xtr_ml_drng_prgncy']= d.prnt_wmn_etg_xtr_ml_drng_prgncy;
                temp['prnt_wmn_rstg_drg_prgncy'] = d.prnt_wmn_rstg_drg_prgncy;
                temp['prnt_4_anc_vst_dlvry'] = d.prnt_4_anc_vst_dlvry;
                temp['prnt_trmstr_3wmn_cnsld_imdtbf'] = d.prnt_trmstr_3wmn_cnsld_imdtbf;
                temp['prnt_intd_cf_6to24mnth_child'] = d.prnt_intd_cf_6to24mnth_child;
                if(d.month_n == "Nov"){
                    aproperty.push(temp);
            }else if (d.month_n == "Dec"){
                sproperty.push(temp);
            }else if (d.month_n == "Jan"){
                oproperty.push(temp);
            }
             console.log( data)
        })

        var listdata = [aproperty,sproperty,oproperty]
         //console.log(listdata)

        return listdata;
        }
       
        
       
     
        
        
     
  
        d3.csv("f4.csv").then(data => {
            console.log(data);

         
            monthwiseData = monthwise(data);
            // console.log(monthwiseData)
                d3.select("#monthdropdown")
            .on("change", () =>{
                        val = document.getElementById("monthdropdown").value
            //             // mydata = selectData(val,monthwiseData);
            //             // console.log(monthwiseData);
                        tableData = tbData(val, monthwiseData);
            //                 // svg.selectAll("*").remove();
            //                 // console.log(tableData);
                            render(tableData);

                        });
                        // augData= monthwiseData[0];
        // console.log(tables)
        tables(monthwiseData[0]);


        })
        const tbData =  (val,monthwiseData) =>{
 console.log(monthwiseData)
        if(val == "November"){

                return [tables(monthwiseData[0])];
        }else if (val == "December"){
            return [tables(monthwiseData[1])];
        }else if (val == 'Jan'){
            return [tables(monthwiseData[2])];      
            }
            
        }
                    
                   
        


function tables(data){
 console.log(data);
$( ".hello" ).remove();
    $( ".hello1" ).remove();

   
var tbdata = [];
            
            data.forEach(d=>{
                var tbd = {}
               // tbd[''] = d.district_n;
                tbd['stunted childern'] = d.stntd_chld;
                tbd['stunting percent %'] = d.stunting_percent;
                tbd['wasted childern'] = d.wstd_chld;
                tbd['wasting percent %'] = d.wasting_percent;
                tbd['underweight childern'] = d.uw_chld;
                tbd['underweight percent %'] = d.underweight_percent;
                tbd['No. of newborn with Low Birth Weight'] = d.nb_lbw;
                tbd['low birth weight percent %'] = d.low_birth_weight_percent;
               
               
                tbdata.push(tbd);
            });
        var table = d3.select('div#table').append('table').attr('class','hello');
          
          console.log(tbData[0]);
		  var titles = d3.keys(tbdata[0]);
      
		  var headers = table.append('thead').append('tr')
		                   .selectAll('th')
		                   .data(titles).enter()
		                   .append('th')
		                   .text(function (d) {
			                    return d;
		                    });
		             
		 
		  var rows = table.append('tbody').selectAll('tr')
		               .data(tbdata).enter()
                       .append('tr');
                       
          rows.selectAll('td')
               
		    .data(function (d) {
		    	return titles.map(function (k) {
		    		return { 'value': d[k], 'name': k};
		    	});
		    }).enter()
            .append('td')
       
        .text(function (d) {
		    	return d.value;
            });


            var tbdata1 = [];
            
            data.forEach(d=>{
                var tbdt = {}
             //   tbdt[''] = d.district_n;
                tbdt['%Anemic women'] = d.prnt_anwmic_wmn;
                tbdt['%Pregnant women had 4 ANC visit'] = d.prnt_4_anc_vst_dlvry;
                tbdt['%Pregnant women resting during pregnancy']=d.prnt_wmn_rstg_drg_prgncy;
                tbdt['%Pregnant women eating extra meal during pregnancy'] = d.prnt_wmn_etg_xtr_ml_drng_prgncy;
                tbdt['%Pregnant women counselled for BF in trimester']=d.prnt_trmstr_3wmn_cnsld_imdtbf;
                tbdt['%Childern breastfeed at birth'] = d.prnt_chld_bf_at_birth;
                tbdt['%Childern (6-8 months) initiated CF']= d.prnt_intd_6to8mnth_cf_child;
                tbdt['%Childern (6-24 months) initiated CF']= d.prnt_intd_cf_6to24mnth_child;
                tbdt['%Childern(0-6) exclusively breastfed'] = d.prnt_chld_excly_bf;
                tbdt['%Children receiving CF with diet diversity'] = d.prnt_chld_rcvg_cf_wid_adq_dt_dvsty;
                tbdt['%Children receiving CF with diet quantity'] = d.prnt_chld_cf_wid_adq_dt_qnty;
                tbdt['%Childern receiving CF with appropriate hand washing'] = d.per_no_chld_cf_wid_appr_hndwhg_bfr_fdg;
                tbdt['%Childern with 1 yaer completed Immunization']= d.prnt_child_1yr_immnztn;

                tbdata1.push(tbdt);
                //console.log(tbdata1);
            });
            

            var table = d3.select('div#table1').append('table').attr('class','hello1');
          
           // console.log(tbData[0]);
            var titles = d3.keys(tbdata1[0]);
        
            var headers = table.append('thead').append('tr')
                             .selectAll('th')
                             .data(titles).enter()
                             .append('th')
                             .text(function (d) {
                                  return d;
                              });
                       
           
            var rows = table.append('tbody').selectAll('tr')
                         .data(tbdata1).enter()
                         .append('tr');
                         
            rows.selectAll('td')
                 
              .data(function (d) {
                  return titles.map(function (k) {
                      return { 'value': d[k], 'name': k};
                  });
              }).enter()
              .append('td')
         
          .text(function (d) {
                  return d.value;
              });
  

}


        </script>
</html>